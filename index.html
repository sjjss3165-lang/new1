<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»æ©Ÿç§‘æ™ºæ…§é»é¤çµ±è¨ˆç³»çµ±ğŸ‘©ğŸ¼â€ğŸ³</title>
    <style>
        :root { --primary: #0056b3; --bg: #f8fafc; --text: #1e293b; --success: #10b981; }
        body { font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; background: var(--bg); margin: 0; padding: 15px; color: var(--text); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 25px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        /* å•†åº—é¸æ“‡æ ¼å­ */
        .store-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 12px; margin-bottom: 25px; }
        .store-card { padding: 18px; border: 2px solid #e2e8f0; border-radius: 12px; background: white; cursor: pointer; transition: 0.3s; position: relative; }
        .store-card:hover { border-color: var(--primary); background: #f0f7ff; transform: translateY(-3px); }
        .store-card.active { border-color: var(--primary); background: #e0f0ff; box-shadow: 0 4px 12px rgba(0,86,179,0.15); }
        .store-card h3 { margin: 0 0 8px 0; color: var(--primary); font-size: 1.15rem; }
        .store-card p { margin: 4px 0; font-size: 0.85rem; color: #64748b; }

        /* è¦æ ¼æ–¹å¡Š (ä¾ç…§æˆªåœ–æ¨£å¼) */
        .spec-label { font-size: 1rem; color: #1e293b; margin: 15px 0 8px; font-weight: bold; border-left: 5px solid var(--primary); padding-left: 10px; }
        .spec-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 12px; }
        .spec-item { border: 2.5px solid var(--primary); color: var(--primary); background: white; padding: 12px 5px; border-radius: 10px; cursor: pointer; font-size: 14px; text-align: center; font-weight: bold; transition: 0.2s; }
        .spec-item.selected { background: var(--primary); color: white; transform: scale(1.05); }

        /* é»é¤æ¸…å–®å¡ç‰‡ */
        .person-card { border: 1px solid #e2e8f0; border-top: 8px solid var(--primary); border-radius: 15px; padding: 25px; margin-bottom: 25px; background: #fff; }
        .item-box { background: #f1f5f9; padding: 20px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #e2e8f0; }
        select { width: 100%; padding: 15px; border-radius: 10px; border: 2px solid #cbd5e1; font-size: 1.1rem; appearance: none; background: #fff; cursor: pointer; }
        
        .footer { position: sticky; bottom: 0; background: var(--text); color: white; padding: 20px; border-radius: 15px; display: flex; justify-content: space-between; align-items: center; z-index: 1000; }
        .btn-copy { width: 100%; padding: 18px; background: #2563eb; color: white; border: none; font-size: 1.2rem; font-weight: bold; cursor: pointer; border-radius: 12px; margin-top: 15px; }
        .price-total { color: #facc15; font-size: 2rem; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align:center; color:var(--text); font-size: 2rem; margin-bottom:30px;">âš¡ é›»æ©Ÿç§‘æ™ºæ…§é»é¤çµ±è¨ˆ Pro (22å®¶åœ°æ¯¯å¼æƒæå…¨å“é …ç‰ˆ)</h1>
    <div class="store-grid" id="storeSelector"></div>

    <div id="storeActiveBox" style="display:none; background: #eff6ff; padding: 20px; border-radius: 15px; margin-bottom: 25px; border: 2px dashed var(--primary); text-align:center;">
        <h2 id="activeName" style="margin:0; color:var(--primary);"></h2>
        <p id="activeDetail" style="margin:10px 0; font-weight: bold;"></p>
    </div>

    <div id="mainOrderArea"></div>
    <button onclick="addPerson()" style="width:100%; padding:20px; background:var(--success); color:white; border:none; border-radius:15px; font-weight:bold; cursor:pointer; font-size: 1.3rem;">ğŸ‘¤ æ–°å¢è¨‚é¤åŒå­¸ (é–‹å§‹é»é¤)</button>
</div>

<div class="footer">
    <div>ç¸½æ•¸é‡ï¼š<span id="totalItems">0</span> ä»½</div>
    <div>å…¨ç­æ‡‰ä»˜ç¸½é¡ï¼š<span class="price-total">$<span id="totalPrice">0</span></span></div>
</div>
<button class="btn-copy" onclick="copyResult()">ğŸ“‹ è¤‡è£½ LINE çµ±è¨ˆæ‘˜è¦ (ç™¼é€è‡³ç­ç¾¤)</button>

<script>
// --- 22 å®¶åº—åœ°æ¯¯å¼å…¨å“é …è³‡æ–™åº« (å®Œæ•´éŒ„å…¥) ---
const stores = {
    "50åµ #åŸºéš†æ·±æºª": { 
        tel: "02-24683368", time: "10:00-22:00",link: "https://order.nidin.shop/menu/21216", off: "ç„¡", 
        ice: ["æ­£å¸¸å†°", "å°‘å†°", "å¾®å†°", "å»å†°", "å¸¸æº«", "ç†±"],
        sugar: ["æ­£å¸¸ç”œ", "9åˆ†ç”œ", "8åˆ†ç”œ", "7åˆ†ç”œ", "åŠç³–", "å°‘ç³–", "å¾®ç³–", "2åˆ†ç³–", "1åˆ†ç”œ", "ç„¡ç³–"],
        menu: {"é˜¿è–©å§†ç´…èŒ¶":40,"èŒ‰è‰ç¶ èŒ¶":40,"å››å­£æ˜¥é’èŒ¶":40,"é»ƒé‡‘çƒé¾":40,"æª¸æª¬ç¶ ":60,"æª¸æª¬ç´…":60,"æ¢…ä¹‹ç¶ ":60,"8å†°ç¶ ":60,"æ¡”å­ç¶ ":60,"é¤Šæ¨‚å¤šç¶ ":60,"é®®æŸšç¶ ":75,"èœ‚èœœç¶ ":60,"å¥¶èŒ¶":60,"å¥¶ç¶ ":60,"çƒé¾å¥¶èŒ¶":60,"å››å­£å¥¶é’":60,"é»ƒé‡‘çƒé¾å¥¶":60,"å¸ƒä¸å¥¶èŒ¶":75,"æ³¢éœ¸å¥¶èŒ¶":60,"çç å¥¶èŒ¶":60,"ç‡•éº¥å¥¶èŒ¶":60,"ç´…èŒ¶ç‘ªå¥‡æœµ":60,"ç¶ èŒ¶ç‘ªå¥‡æœµ":60,"çƒé¾ç‘ªå¥‡æœµ":60,"å››å­£ç‘ªå¥‡æœµ":60,"æ³¢éœ¸ç´…èŒ¶æ‹¿éµ":70,"çç ç´…èŒ¶æ‹¿éµ":70,"ç‡•éº¥ç´…èŒ¶æ‹¿éµ":70,"å¯å¯èŠ­è•¾":70,"é˜¿è¯ç”°":60,"å†°æ·‡æ·‹ç´…èŒ¶":60,"èŠ’æœé’":60,"æ³¢éœ¸ç´…/ç¶ /é’/çƒ":50,"çç ç´…/ç¶ /é’/çƒ":50,"ç‡•éº¥ç´…/ç¶ /é’/çƒ":50,"éºµèŒ¶å¥¶èŒ¶":75,"éºµèŒ¶å¥¶ç¶ ":75,"ä»™è‰å¥¶å‡":60}, 
        toppings: {"ä¸åŠ æ–™":0, "æ³¢éœ¸":0, "çç ":0, "æ³¢éœ¸+çç ":0, "å¸ƒä¸(2é¡†)":20, "ä»™è‰å‡":10, "ç‡•éº¥":10} 
    },
    "å¾—æ­£ #åŸºéš†æµ·å¤§": { 
        tel: "02-24621016", time: "11:00-21:00", link: "https://order.nidin.shop/menu/18739", off: "ç„¡", 
        ice: ["æ­£å¸¸å†°", "å°‘å†°", "å¾®å†°", "å»å†°", "å®Œå…¨å»å†°", "å¸¸æº«", "æº«", "ç†±"],
        sugar: ["æ­£å¸¸ç”œ", "å°‘ç³–", "åŠç³–", "å¾®ç³–", "äºŒåˆ†ç³–", "ç„¡ç³–"],
        menu: {"æ˜¥çƒé¾":30,"è¼•çƒé¾":30,"ç„™çƒé¾":30,"ç·‹çƒé¾":35,"ç´…èŒ¶":25,"ç¶ èŒ¶":25,"æª¸æª¬æ˜¥çƒé¾":55,"é¦™æ©™æ˜¥çƒé¾":60,"ç”˜è”—æ˜¥çƒé¾":60,"è‘¡è„æŸšæ˜¥çƒé¾":60,"ç™¾é¦™æœæ˜¥çƒé¾":55,"å„ªé¦™é®®å¥¶èŒ¶":60,"ç„™çƒé¾å¥¶èŒ¶":50,"è¼•çƒé¾å¥¶èŒ¶":50,"æ˜¥çƒé¾å¥¶èŒ¶":50,"ç·‹çƒé¾å¥¶èŒ¶":50,"çƒ˜å‰å¥¶èŒ¶":50,"ç´…èŒ¶é®®å¥¶":55,"è¼•çƒé¾é®®å¥¶":55,"ç„™çƒé¾é®®å¥¶":55,"ç·‹çƒé¾é®®å¥¶":60,"çç å¥¶èŒ¶":55,"é»ƒé‡‘çç å¥¶ç¶ ":55,"èŠå£«å¥¶è“‹æ˜¥çƒé¾":50,"èŠå£«å¥¶è“‹ç„™çƒé¾":50,"èŠå£«å¥¶è“‹ç·‹çƒé¾":55,"èŠå£«å¥¶è“‹ç´…èŒ¶":50,"èŠå£«å¥¶è“‹ç¶ èŒ¶":50,"é…¸è“ç·‹çƒé¾":50,"æŠ¹èŒ¶é®®å¥¶":65,"çƒ˜å‰é®®å¥¶":65}, 
        toppings: {"ä¸åŠ æ–™":0, "ç„™çƒé¾èŒ¶å‡":10, "é»ƒé‡‘çç ":10, "èŠå£«å¥¶è“‹":20} 
    },
    "é¶´èŒ¶æ¨“ #åŸºéš†å¿ ä¸€": { 
        tel: "02-24265572", time: "10:00-22:00",link: "https://order.nidin.shop/menu/19710", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°","å®Œå…¨å»å†°","å¸¸æº«","ç†±"],
        sugar: ["æ­£å¸¸","å°‘ç³–","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"é¶´é ‚ç´…èŒ¶":35,"ç¶ºå¤¢ç´…èŒ¶":40,"èˆ¶ä¾†ç´…èŒ¶":30,"è—ä¼ç´…èŒ¶":45,"æ¡‚é¦™çƒé¾":35,"é‡‘è±é’èŒ¶":30,"ç¥è¾²ç‰›ä¹³":65,"ç¶ºå¤¢é‚£å ¤":60,"åœ°é‹é‚£å ¤":60,"ç¶­å¤šåˆ©äºé‚£å ¤":65,"æ³°å¼å¥¶èŒ¶":65,"æä»å‡å¥¶èŒ¶":65,"é¶´é ‚ç²‰ç²¿å¥¶èŒ¶":60,"çç å¥¶èŒ¶":60,"é’æª¸è˜­é¦™ç¶ ":60,"è”æç´…èŒ¶":50,"é»‘ç³–çç å¥¶èŒ¶":65,"å†¬ç“œé‚£å ¤":55,"å¾©åˆ»å¥¶èŒ¶":50,"å¤§æ­¦å±±æ‹¿éµ":65,"è’™å¤ªå¤æ‹¿éµ":65}, 
        toppings: {"ä¸åŠ æ–™":0, "æä»å‡":15, "èŒ¶å‡":10, "é¶´é ‚ç²‰ç²¿":15, "çç ":10} 
    },
    "æ‹¾æ±£èŒ¶å±‹ #åŸºéš†å»Ÿå£": { 
        tel: "02-24247778", time: "10:30-22:30",link: "https://www.19teahouse.com/works/detail/Store29",, off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°","å®Œå…¨å»å†°","å¸¸æº«"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"æ„›ç‰å…¬çˆµ":45,"çç é®®å¥¶èŒ¶":60,"ç´”èŒ¶(ç¶ /çƒ/é’)":30,"éµè§€éŸ³":30,"ç²‰ç²¿æ¡‚èŠ±":45,"æ‹¾æ±£å¥¶èŒ¶":45,"æ¡èœœç´…èŒ¶":35,"ç´…æŸšç¿ ç‰":55,"çƒé¾å¥¶èŒ¶":45,"ä»™è‰ä¹¾èŒ¶":35,"å†¬ç“œèŒ¶":30,"ç”˜è”—é’èŒ¶":55,"çˆ†çˆ†ç ç¶ èŒ¶":55,"å¸ƒä¸å¥¶èŒ¶":60,"ç´…è±†æ¹¯":55,"çç é†‡å¥¶èŒ¶":50,"æ­è•¾ç³»åˆ—":60}, 
        toppings: {"ä¸åŠ æ–™":0, "ç²‰ç²¿":10, "çç ":10, "æ„›ç‰":10, "çˆ†çˆ†ç ":15, "å¸ƒä¸":15} 
    },
    "å¯ä¸å¯ #åŸºéš†æ·±æºª": { 
        tel: "02-24659695", time: "10:00-22:00",link: "https://kebuke.com/menu/", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°","å®Œå…¨å»å†°"], sugar: ["æ­£å¸¸","å°‘ç³–","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"ç†Ÿæˆç´…èŒ¶":35,"éº—æ˜¥ç´…èŒ¶":35,"èƒ­è„‚ç´…èŒ¶":40,"æ˜¥èŠ½ç¶ èŒ¶":35,"æ˜¥æ¢…å†°èŒ¶":50,"å†·éœ²æ­è•¾":55,"ç†Ÿæˆæ­è•¾":55,"ç™½ç‰æ­è•¾":60,"ç†Ÿæˆå¥¶èŒ¶":50,"éº—æ˜¥æ­è•¾":55,"èƒ­è„‚é‚£å ¤":60,"æ˜¥èŠ½é‚£å ¤":55,"é›ªè—ç´…èŒ¶":55,"å¢¨ç‰æ­è•¾":60,"é‡‘é‘½é³³æ¢¨ç¶ ":60,"æŸšæœç´…èŒ¶":65,"æ©˜æœç´…èŒ¶":65}, 
        toppings: {"ä¸åŠ æ–™":0, "ç™½ç‰":10, "æ°´ç‰":10} 
    },
    "è¿·å®¢å¤ #åŸºéš†å»Ÿå£": { 
        tel: "02-24261766", time: "10:00-21:30", link: "https://milksha.nidin.shop/menu/491", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","ä¸ƒåˆ†","åŠç³–","ä¸‰åˆ†","ç„¡ç³–"],
        menu: {"çç é®®å¥¶":75,"ä¼¯çˆµæ‹¿éµ":65,"å¤§ç”²èŠ‹é ­é®®å¥¶":80,"é’èŒ¶":30,"éº¥èŒ¶":30,"å¨œæ¯ç´…èŒ¶":35,"åˆéœ²ç¶ èŒ¶":30,"ç¥ç€æ‹¿éµ":65,"ç„™èŒ¶æ‹¿éµ":65,"æŸ³ä¸ç¶ ":65,"è‘¡è„æŸšç¶ ":65,"è‰è“é®®å¥¶":80,"æŸ³æ©™æ­è•¾":70,"æ±ºæ˜å¤§éº¥":30,"æ³•èŠ™å¨œå¯å¯":75,"é¤Šæ¨‚å¤šç¶ ":60,"é¦™ç·¹ç´…èŒ¶":40,"èŒ‰é¦™ç¶ èŒ¶":30}, 
        toppings: {"ä¸åŠ æ–™":0, "ç™½ç‰çç ":10, "ä»™è‰å‡":10, "ç¶ èŒ¶å‡":10, "é»ƒé‡‘çç ":10, "è„†å•µå•µ":15} 
    },
    "é¾œè¨˜ #åŸºéš†åº—": { 
        tel: "02-24258889", time: "11:00-22:00",link: "https://guiji.doteat.tw/menu?storeId=LEzDQINl-0000wKv98o&showBulletin=1", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"ç´…æŸšç¿¡ç¿ ":75,"è˜‹æœç´…è±":55,"ä¸‰åå››è™Ÿç´…èŒ¶":40,"ç¿¡ç¿ ç¶ èŒ¶":35,"ä¸‰éŸ»å¥¶èŒ¶":55,"é˜¿è–©å§†å¥¶èŒ¶":55,"å†¬ç“œé®®ä¹³":65,"ç§€èŠæ¯":65,"è€æ¬‰æª¸æª¬ç¶ ":55,"å†¬ç“œæª¸æª¬":50,"ç´…æ°´çƒé¾":40,"é®®ä¹³èŒ¶":65,"é‡‘æ¡”æª¸æª¬":55,"é›·å¤¢è—èª¿":60,"ç´…çƒé¾æ‹¿éµ":65,"é»‘æœ¨è€³é®®ä¹³":70}, 
        toppings: {"ä¸åŠ æ–™":0, "çç ":10} 
    },
    "æ¸…å¿ƒç¦å…¨ #æµ·å¤§": { 
        tel: "02-24626266", time: "10:00-22:45",link: "http://chingshin.tw/", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"çƒé¾ç¶ èŒ¶":30,"å„ªå¤šç¶ èŒ¶":45,"éš±è—ç‰ˆ":50,"èœ‚èœœç´…èŒ¶":50,"éŒ«è˜­ç´…èŒ¶":30,"ç‰¹ç´šç¶ èŒ¶":30,"çç å¥¶èŒ¶":50,"å†¬ç“œèŒ¶":30,"ä»™è‰å‡å¥¶èŒ¶":50,"æ¢…å­ç¶ èŒ¶":45,"çç é®®å¥¶èŒ¶":60,"å¸ƒä¸å¥¶èŒ¶":60,"ç¿¡ç¿ æª¸æª¬":50,"è–‘æ¯èŒ¶":50,"å†°æ·‡æ·‹ç´…èŒ¶":50,"æƒ…äººèŒ¶":45,"æ¤°æœå¥¶èŒ¶":45}, 
        toppings: {"ä¸åŠ æ–™":0, "çç ":10, "æ¤°æœ":10, "å¸ƒä¸":20, "ä»™è‰å‡":10} 
    },
    "äº”æ¡è™Ÿ #åŸºéš†ä»ä¸‰": { 
        tel: "02-24283616", time: "11:00-21:30", link: "https://www.wootea.com/menu/", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"äº”æ¡èŒ¶":35,"æä»å‡äº”æ¡èŒ¶":45,"ç¶ èŒ¶å‡äº”æ¡èŒ¶":45,"é’èŒ¶å‡äº”æ¡èŒ¶":45,"ä»™è‰å‡å¥¶èŒ¶":50,"è€å¯¦äººç´…èŒ¶":35,"æ‹›ç‰Œå¥¶èŒ¶":50,"æœ€æ„›å¥¶èŒ¶":50,"æ³°å¼å¥¶èŒ¶":65,"è”æå†°èŒ¶":60,"ç‰å ‚æ˜¥èŒ¶":35,"ä¸€æŠŠé’":35,"èŒ‰è‰ç¶ èŒ¶":30,"èœœé¦™ç´…èŒ¶":35,"äº”æ¡å¥¶èŒ¶":50}, 
        toppings: {"ä¸åŠ æ–™":0, "ç¶ èŒ¶å‡":10, "å°çç ":10, "æä»å‡":15, "ä»™è‰å‡":10, "å¤šå¤š":10} 
    },
    "æœ‰é£² #åŸºéš†å»Ÿå£": { 
        tel: "02-24258827", time: "11:00-21:00",link: "https://www.youindrink.com/pages/menu", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"æ—ºæ—ºä¾†æ°´æœèŒ¶":65,"ç²‰ç²¿ç´…":40,"ç„¦ç³–æ‹¿éµ":75,"æŸ³æ©™ç¶ èŒ¶":60,"æ†¨å‰å¥¶éœœ":70,"ç‚å¤èŠ’æœ":75,"å¸ƒä¸å¥¶èŒ¶":70,"ç¶“å…¸ç´…èŒ¶":35,"å››å­£æ˜¥":35,"å„ªé…ªä¹³ç¶ èŒ¶":60,"å¥¶èŒ¶":50,"çç é®®å¥¶èŒ¶":65,"ç„™èŒ¶æ‹¿éµ":70,"é‡‘è±é’èŒ¶":35,"å¤æ—©å‘³èŒ¶é£²":35}, 
        toppings: {"ä¸åŠ æ–™":0, "ç²‰ç²¿":10, "çç ":10, "å¸ƒä¸":15} 
    },
    "æ—é¦™æª¸ #åŸºéš†åº—": { 
        tel: "02-24270618", time: "11:00-21:00", link: "https://www.lamheunglingoverseas.com/cz", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"æ‹›ç‰Œæª¸æª¬èŒ¶":55,"ç¶ å¦æª¸æª¬èŒ¶":55,"æ³°å¼æª¸æª¬èŒ¶":60,"æ‰‹æ‰“æª¸æª¬ç¶ ":55,"ç«ç‘°æª¸æª¬èŒ¶":60,"é‡‘é³³æª¸æª¬èŒ¶":60,"é´¨å±é¦™æª¸æª¬èŒ¶":65,"é»‘é‡‘æª¸æª¬èŒ¶":60,"æª¸æª¬ç´…èŒ¶":55,"é¹¹æª¸ä¸ƒ":60,"é›™æ‹¼æª¸æª¬èŒ¶":65}, 
        toppings: {"ä¸åŠ æ–™":0} 
    },
    "Mr.Wish #åŸºéš†å»Ÿå£": { 
        tel: "02-24273456", time: "11:00-22:00", link: "https://www.mr-wish.com/load_page/get_menu_page", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"æ°´æœèŒ¶":60,"å…‰æœèŒ¶":65,"çç å¥¶èŒ¶":50,"æ„›æ–‡èŠ’æœå†°æ²™":85,"è‰è“åšå¥¶":80,"é‡‘é‘½é³³æ¢¨ç¶ ":60,"é‡è“çº–æœé£²":65,"ç™½ç³–è„†è„†é‚£å ¤":70,"ç”˜è”—é’èŒ¶":60,"å†¬ç“œæª¸æª¬":50,"èœœæ¡ƒæœç²’èŒ¶":65,"ç†Ÿæˆç´…èŒ¶":30,"èŒ‰é¦™ç¶ èŒ¶":30}, 
        toppings: {"ä¸åŠ æ–™":0, "çç ":10, "æ¤°æœ":10, "æ„›ç‰":10, "è˜†è–ˆ":10} 
    },
    "Coco #åŸºéš†æµ·æ´‹": { 
        tel: "02-24620586", time: "10:30-21:30", link: "https://coco-tea.nidin.shop/menu/21237", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"å¥¶èŒ¶ä¸‰å…„å¼Ÿ":55,"ç™¾é¦™é›™éŸ¿ç‚®":50,"çç å¥¶èŒ¶":45,"å¸ƒä¸å¥¶èŒ¶":55,"è“æœæ´¾å°":60,"æ˜Ÿç©ºè‘¡è„":75,"è¥¿è°·ç±³å¥¶èŒ¶":50,"èŒ‰è‰ç¶ èŒ¶":35,"å››å­£æ˜¥":35,"èŠåœ’ç´…èŒ¶":35,"èŠ‹é ­ç‰›å¥¶":70,"QQå¥¶èŒ¶":50,"æª¸æª¬ç¶ èŒ¶":50,"å·§å…‹åŠ›æ­è•¾":55}, 
        toppings: {"ä¸åŠ æ–™":0, "çç ":10, "å¸ƒä¸":15, "æ¤°æœ":10, "è¥¿è°·ç±³":10} 
    },
    "Comebuy #æ–°è±": { 
        tel: "02-24695668", time: "10:00-22:00", link: "https://drive.google.com/file/d/1Rq51uQuxEv4VDxwoB-hDczLhqECx9Gu2/view?usp=sharing",off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"æµ·ç¥":40,"è˜‹æœå†°èŒ¶":55,"è”æç‰éœ²":55,"çµ•ä»£é›™Qå¥¶èŒ¶":55,"çº–ç¾å°ç´«è˜‡":50,"ç™¾é¦™æœæ–æœæ¨‚":55,"ç©ç«":40,"éŒ«è˜­ç´…èŒ¶":35,"èŒ‰è‰ç¶ èŒ¶":35,"é›™Qå¥¶èŒ¶":55,"ç²‰æ¢å¥¶èŒ¶":55,"çƒé¾å¥¶èŒ¶":50,"ç«ç‘°é’èŒ¶":45,"æª¸æª¬å†°æ²™":55}, 
        toppings: {"ä¸åŠ æ–™":0, "ç²‰æ¢":10, "çç ":10, "æ¤°æœ":10, "æ„›ç‰":10} 
    },
    "æ°´é›²å ‚ #ç¾©äºŒåº—": { 
        tel: "02-24261227", time: "10:00-22:00",link: "https://www.drinkstore.com.tw/web/product/product.jsp", off: "ç„¡", 
        ice: ["æ­£å¸¸","å°‘å†°","å¾®å†°","å»å†°"], sugar: ["æ­£å¸¸","åŠç³–","å¾®ç³–","ç„¡ç³–"],
        menu: {"é»‘ç³–çç é®®å¥¶":65,"ç´”èŒ¶":30,"æ°´æœèŒ¶":60,"æ²–ç¹©é»‘ç³–å¥¶èŒ¶":55,"èŠå£«å¥¶è“‹ç´…èŒ¶":60,"é‡‘é‘½é³³æ¢¨ç¶ ":60,"ç«ç‘°æ‹¿éµ":65,"ä»™è‰å¥¶å‡":50,"èŠ‹é ­é®®å¥¶":75,"ç™¾é¦™é›™Q":55,"è‘¡è„æŸšç¶ ":60,"é‡‘æ¡”æª¸æª¬":55,"é»‘ç³–æ‹¿éµ":65}, 
        toppings: {"ä¸åŠ æ–™":0, "çç ":10, "æ¤°æœ":10, "èŒ¶å‡":10, "ä»™è‰":10} 
    },
    "è’Ÿè’»å±‹": { 
        tel: "02-24229000", time: "09:00-02:00",link: "https://drive.google.com/file/d/1T08WgpxufhYVOJ8sbfc7gvpthvoDaacY/view?usp=sharing", off: "ç„¡", 
        ice: ["æ­£å¸¸","å»å†°","æº«","ç†±"], sugar: ["æ­£å¸¸","åŠç³–","ç„¡ç³–"],
        menu: {"ç¶œåˆè’Ÿè’»":70,"ç¶ è±†æ¹¯":55,"ç´…è±†æ¹¯":55,"è±†èŠ±":45,"èŠ±ç”Ÿæ¹¯":55,"ç‡’ä»™è‰":50,"ç¶œåˆåˆ¨å†°":65,"ç¶ è±†è’Ÿè’»":60,"ç´…è±†è’Ÿè’»":60,"èŠ±ç”Ÿè’Ÿè’»":60,"è–ä»æ¹¯":55,"éŠ€è€³è“®å­æ¹¯":70,"è–ä»è’Ÿè’»":60,"ä»™è‰å‡":45,"é»‘ç³–æ°´å†°":35}, 
        toppings: {"åŸå‘³":0, "åŠ çç ":5, "åŠ ç´…è±†":10, "åŠ ç…‰ä¹³":10, "åŠ è’Ÿè’»":10, "åŠ èŠ±ç”Ÿ":10, "åŠ ç¶ è±†":10} 
    },
    "å»–åª½åª½éºµé£¯é¤¨": { 
        tel: "02-24230398", time: "11:00-21:00",link: "https://drive.google.com/file/d/1j_SjavYZbnJjJHCJNSzVQaAzf_1e5Km0/view?usp=sharing", off: "é€±æ—¥", 
        ice: ["ç„¡"], sugar: ["ç„¡"], 
        menu: {"æ’éª¨é£¯":95,"é›è…¿é£¯":105,"æ»·è‚‰é£¯":40,"æ‰£è‚‰é£¯":95,"ç‚’éºµ":75,"ä»€éŒ¦ç‡´é£¯":95,"è²¢ä¸¸æ¹¯":30,"é¤›é£©æ¹¯":40,"ä»€éŒ¦æ¹¯":65,"è±¬è‚æ¹¯":50,"æ¦¨èœè‚‰çµ²éºµ":75,"æ’éª¨éºµ":95,"ç‰›è‚‰éºµ":150,"é¤›é£©éºµ":75,"è‚‰çµ²ç‚’é£¯":80,"ç‚¸é†¬éºµ":65}, 
        toppings: {"æ­£å¸¸":0, "åŠ æ»·è›‹":15, "åŠ é£¯":10, "åŠ éºµ":10, "åŠ è²¢ä¸¸":10} 
    },
    "å¤§ç¢—ç‰›è‚‰éºµ": { 
        tel: "02-24633396", time: "11:00-20:30",link: "https://drive.google.com/file/d/12wii4UGfDTHYECO5ObXyS6qutY9qRcaX/view?usp=sharing", off: "é€±ä¸€", 
        ice: ["ç„¡"], sugar: ["ç„¡"], 
        menu: {"ç‰›è‚‰éºµ":150,"åŠç­‹åŠè‚‰éºµ":180,"ç‰›è‚šéºµ":180,"ä¸‰å¯¶éºµ":200,"ç‰›è‚‰æ¹¯éºµ":90,"ç‚¸é†¬éºµ":70,"ä¹¾éºµ":70,"æ¦¨èœè‚‰çµ²éºµ":80,"ç‰›è‚‰ç´°ç²‰":150,"ç‰›è‚šç´°ç²‰":180,"å„å¼å°èœ":40,"ç‡™é’èœ":40,"å¤§ä»½ç‰›è‚‰éºµ":180,"ç‰›è‚‰æ¹¯":120}, 
        toppings: {"æ­£å¸¸":0, "åŠ å¤§":20, "ä¸åŠ è”¥":0, "åŠ è¾£":0} 
    },
    "é‚±è¨˜ç‚’éºµ": { 
        tel: "02-24680335", time: "11:00-20:00",link: "https://drive.google.com/file/d/1zuEI_w-zwS9rIGRcekHsb_QXll1twyg3/view?usp=sharing", off: "é€±ä¸€", 
        ice: ["ç„¡"], sugar: ["ç„¡"], 
        menu: {"ä»€éŒ¦ç‚’éºµ":85,"è‚‰çµ²ç‚’éºµ":75,"ç‰›è‚‰ç‚’éºµ":95,"è‚‰çµ²è›‹ç‚’é£¯":80,"ä»€éŒ¦ç‡´é£¯":90,"è‚‰çµ²ç‡´é£¯":80,"ç‚’çƒé¾":80,"ä»€éŒ¦æ¹¯":60,"è±¬è‚æ¹¯":50,"è²¢ä¸¸æ¹¯":30,"è›¤èœŠæ¹¯":50,"ç‡™é’èœ":40,"ç‰›è‚‰ç‡´é£¯":100,"ç‚’é’èœ":60}, 
        toppings: {"æ­£å¸¸":0, "åŠ éºµ/é£¯":10, "åŠ è›‹":10, "åŠ è¾£":0} 
    },
    "éº¥å…‹éºµç·š": { 
        tel: "02-24236667", time: "06:00-18:00",link: "https://maps.app.goo.gl/DNe9c5xbqTsyfBGE7", off: "ç„¡", 
        ice: ["ç„¡"], sugar: ["ç„¡"], 
        menu: {"å…¨ç¾¹éºµç·š":55,"é­šé…¥éºµç·š":55,"è‚‰ç¾¹éºµç·š":55,"å¤§è…¸éºµç·š":55,"å¸¶å¸¶éºµç·š":65,"æ¸…éºµç·š":40,"ç”œä¸è¾£":55,"å¤§è…¸é­šé…¥éºµç·š":65,"ç¶œåˆéºµç·š":65,"è‚‰ç¾¹":50,"é­šé…¥ç¾¹":50}, 
        toppings: {"æ­£å¸¸":0, "åŠ å¤§":15, "å¤šé¦™èœ":0, "ä¸è¦é¦™èœ":0, "åŠ è¾£":0} 
    },
    "è±†ä¹¾åŒ…ç¥¥è±è¡—": { 
        tel: "02-24201711", time: "10:00-19:00",link: "https://drive.google.com/file/d/18VeBd_w6HFvBD321t7Iu-QaNfko5CljQ/view?usp=sharing", off: "é€±æ—¥", 
        ice: ["ç„¡"], sugar: ["ç„¡"], 
        menu: {"è±†ä¹¾åŒ…æ¹¯":50,"ä¹¾éºµ":35,"é­šä¸¸æ¹¯":40,"å†¬ç²‰æ¹¯":35,"ç¶œåˆæ¹¯":55,"è±†ä¹¾åŒ…ä¸€ä»½":50,"å†¬ç²‰åŠ è±†ä¹¾åŒ…":60,"ä¹¾ç±³ç²‰":35,"ç±³ç²‰æ¹¯":35}, 
        toppings: {"ä¸åŠ æ–™":0, "åŠ éºµ":10, "åŠ ç±³ç²‰":10} 
    },
    "ç¾é¦™é½‹æ»·å‘³": { 
        tel: "02-24263357", time: "11:00-23:00",link: "https://drive.google.com/file/d/1pjCLx6xivI5e_Ud1zmMglOFFZtsjDFij/view?usp=sharing", off: "ç„¡", 
        ice: ["ç„¡"], sugar: ["ç„¡"], 
        menu: {"æ»·å‘³æ‹¼ç›¤":100,"ç¶œåˆæ»·å‘³":80,"æ°´é¤ƒ(10é¡†)":60,"ä¹¾æ‹Œéºµ":50,"é…¸è¾£æ¹¯":35,"æ»·è‚‰é£¯":35,"ç‡™é’èœ":40,"æ»·è›‹":15,"é’èœæ¹¯":30,"è±†è…":20,"æµ·å¸¶":20}, 
        toppings: {"ä¸åŠ æ–™":0, "åŠ è¾£":0, "ä¸åŠ é…¸èœ":0} 
    }
};

let currentStore = "";
let orders = JSON.parse(localStorage.getItem('ee_master_final_v2')) || [];

function init() {
    const selector = document.getElementById('storeSelector');
    Object.keys(stores).sort().forEach(name => {
        const s = stores[name];
        selector.innerHTML += `<div class="store-card" id="card-${name}" onclick="selectStore('${name}')">
            <h3>${name}</h3>
            <p>ğŸ“ ${s.tel} | â° ${s.time}</p>
            <p style="color:#ef4444; font-weight:bold;">ğŸš« å…¬ä¼‘: ${s.off}</p>
        </div>`;
    });
    render();
}

function selectStore(name) {
    currentStore = name;
    document.querySelectorAll('.store-card').forEach(c => c.classList.remove('active'));
    document.getElementById(`card-${name}`).classList.add('active');
    document.getElementById('storeActiveBox').style.display = 'block';
    document.getElementById('activeName').innerText = name;
    document.getElementById('activeDetail').innerText = `é›»è©±ï¼š${stores[name].tel} | ç‡Ÿæ¥­æ™‚é–“ï¼š${stores[name].time}`;
    render();
}

function addPerson() {
    const name = prompt("è«‹è¼¸å…¥è¨‚é¤äººå“¡å§“å (ä¾‹å¦‚: é™³åŒå­¸ æˆ– ç‹è€å¸«)ï¼š");
    if (!name) return;
    orders.push({ name, items: [{ drink: "", sugar: "ç„¡ç³–", ice: "å»å†°", topping: "ä¸åŠ æ–™", price: 0 }], paid: 0 });
    save();
}

function update(pIdx, iIdx, field, val) {
    const it = orders[pIdx].items[iIdx];
    it[field] = val;
    if (currentStore && (field === 'drink' || field === 'topping')) {
        const s = stores[currentStore];
        it.price = (s.menu[it.drink] || 0) + (s.toppings[it.topping] || 0);
    }
    save();
}

function save() {
    localStorage.setItem('ee_master_final_v2', JSON.stringify(orders));
    render();
}

function render() {
    const container = document.getElementById('mainOrderArea');
    container.innerHTML = '';
    let totalP = 0, totalC = 0;
    const sData = stores[currentStore];

    orders.forEach((p, pIdx) => {
        let pSum = 0;
        const itemsHtml = p.items.map((it, iIdx) => {
            pSum += it.price; totalC++;
            let dOpts = `<option value="">-- è«‹ä¸‹æ‹‰é¸æ“‡è©²åº—ã€Œå…¨å“é …ã€èœå–® --</option>`;
            if(sData) Object.keys(sData.menu).sort().forEach(d => dOpts += `<option value="${d}" ${it.drink===d?'selected':''}>${d} ($${sData.menu[d]})</option>`);
            
            let iceGrid = sData && sData.ice[0] !== "ç„¡" ? `<div class="spec-label">æº«åº¦ / å†°åº¦</div><div class="spec-grid">${sData.ice.map(l => `<div class="spec-item ${it.ice===l?'selected':''}" onclick="update(${pIdx},${iIdx},'ice','${l}')">${l}</div>`).join('')}</div>` : "";
            let sugarGrid = sData && sData.sugar[0] !== "ç„¡" ? `<div class="spec-label">ç³–åº¦ / ç”œåº¦</div><div class="spec-grid">${sData.sugar.map(l => `<div class="spec-item ${it.sugar===l?'selected':''}" onclick="update(${pIdx},${iIdx},'sugar','${l}')">${l}</div>`).join('')}</div>` : "";
            
            return `<div class="item-box">
                <select onchange="update(${pIdx},${iIdx},'drink',this.value)">${dOpts}</select>
                ${iceGrid} ${sugarGrid}
                <div class="spec-label">åŠ æ–™ / å®¢è£½å‚™è¨»</div>
                <select onchange="update(${pIdx},${iIdx},'topping',this.value)">${Object.keys(sData ? sData.toppings : {}).map(t=>`<option value="${t}" ${it.topping===t?'selected':''}>+${t} (+$${sData.toppings[t]})</option>`).join('')}</select>
                <div style="text-align:right; font-weight:bold; color:var(--primary); margin-top:10px; font-size:1.1rem;">å–®é …å°è¨ˆï¼š$${it.price}</div>
            </div>`;
        }).join('');

        totalP += pSum;
        container.innerHTML += `<div class="person-card">
            <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:2.5px solid #f1f5f9; padding-bottom:12px; margin-bottom:15px;">
                <strong style="font-size:1.4rem;">ğŸ‘¤ ${p.name}</strong> 
                <span style="color:var(--primary); font-weight:900; font-size:1.5rem;">å€‹äººæ‡‰æ”¶ï¼š$${pSum}</span>
            </div>
            ${itemsHtml}
            <button onclick="orders[${pIdx}].items.push({drink:'',sugar:'ç„¡ç³–',ice:'å»å†°',topping:'ä¸åŠ æ–™',price:0});render()" style="color:blue; background:none; border:none; cursor:pointer; font-weight:bold; padding:10px 0; font-size:1rem;">+ ç‚ºæ­¤äººåŠ é» (é‡‘é¡è‡ªå‹•ç´¯åŠ )</button>
            <div style="margin-top:15px; background:#fff7ed; padding:15px; border-radius:12px; display:flex; justify-content:space-between; align-items:center; border:1.5px solid #ffedd5;">
                <span>æ”¶ç¾é‡‘ï¼š<input type="number" style="width:85px; padding:10px; border-radius:8px; border:1px solid #ddd;" value="${p.paid}" oninput="orders[${pIdx}].paid=this.value;render()"></span>
                <span style="color:#c2410c; font-weight:bold; font-size:1.5rem;">æ‡‰æ‰¾éŒ¢ï¼š${p.paid-pSum > 0 ? p.paid-pSum : 0} å…ƒ</span>
                <button onclick="if(confirm('ç¢ºå®šç§»é™¤æ­¤äººè³‡æ–™ï¼Ÿ')){orders.splice(${pIdx},1);save();}" style="color:#94a3b8; border:none; background:none; cursor:pointer; font-size:13px;">[ç§»é™¤äººå“¡]</button>
            </div>
        </div>`;
    });
    document.getElementById('totalPrice').innerText = totalP;
    document.getElementById('totalItems').innerText = totalC;
}

function copyResult() {
    let text = `ğŸ“‹ ã€é›»æ©Ÿç§‘æ™ºæ…§é»é¤çµ±è¨ˆæ‘˜è¦ã€‘\nğŸ“ åº—å®¶ï¼š${currentStore}\n------------------\n`;
    orders.forEach(p => {
        let s = 0; text += `ğŸ‘¤ ${p.name}ï¼š\n`;
        p.items.forEach(i => {
            text += `  â— ${i.drink} (${i.sugar}/${i.ice}) ${i.topping!=='ä¸åŠ æ–™'?'+'+i.topping:''} $${i.price}\n`;
            s += i.price;
        });
        text += `  ğŸ’° å€‹äººç´¯åŠ å°è¨ˆï¼š$${s}\n------------------\n`;
    });
    text += `ğŸ”¥ å…¨ç­é»è³¼ç¸½é¡ï¼š$${document.getElementById('totalPrice').innerText}`;
    navigator.clipboard.writeText(text); alert("çµ±è¨ˆæ‘˜è¦å·²è¤‡è£½ï¼å¯ç›´æ¥å‰å¾€ LINE ç¾¤çµ„è²¼ä¸Šã€‚");
}

window.onload = init;
</script>
</body>
</html>
